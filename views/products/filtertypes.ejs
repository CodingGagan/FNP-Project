<%- include('../partials/header'); %>
    <div class="dashboard">
        <div class="icon">
            <i class='bx bxl-xing'></i>
            <div class="icon1">
                <a href=" ">View Site<i class='bx bx-chevron-down'></i> </a>
                <a href=" ">Log out </a>
            </div>

        </div>
        <div class="dash">
            <div class="home">
                <div class="hp">
                    <h2>Product</h2>
                    <p>Home / Update filter product</p>
                         
                </div>
                <div class="hp-1">
                     <a id="Admin" href="/products" style="margin: 20px;"><i class="fa-solid fa-user"></i> Products</a> 
                    <a id="Admin" href="" style="margin: 20px;"><i class="fa-solid fa-user"></i> Admin</a>
                </div>
                              
<form action="" method="POST">

                            
                 

                   <div class="mb-3">
        <label for="exampleFormControlTextarea1" class="form-label">Name</label>
        <input type="text" required value="<%= filterType[0].name %>" class="form-control" name="name" id="exampleFormControlInput1" style="width: 450px;">                
        </div>
        <% if(filterType.length>0){
                              filterType.forEach(function(data){
                                            %>
                                             <% }) } else{ %>
                                               
                                                %>
                                                %>
                                                <% } %>

                    <div class="name">
                        <label style="width: 100%;" for="exampleFormControlTextarea1"
                                    class="form-label">Category</label>
                        <select style="width: 100%; padding: 10px 10px;" name="filtercategory"
                                    class="form-select categoriesSelect" aria-label="Default select example">

                                    <% categories.forEach((cat)=> {
                                        %>
                                        <option value="<%= cat.name %>">
                                            <%= cat.name %>
                                        </option>
                                        <% }) %>

                                </select>

                    </div>
                    <div class="name">
                        <label style="width: 100%; margin-top: 15px;" for="exampleFormControlTextarea1"
                                        class="form-label">Sub Category</label>
                                    <select style="width: 100%; padding: 10px 10px;" id="subCategory"
                                        name="filtersubcategory" class="form-select subCategoriesSelect"
                                        aria-label="Default select example">


                                    </select>
                    </div>
                    <div class="name">
                        <label for="exampleFormControlTextarea1" class="form-label"
                            style="margin-top: 10px;">Image</label>
                    </div>
                    <div class="name1 " style="margin-left: 10px;">
                        <input type="file" name="image" >
                    </div>
                    <div class="name1" style="margin-left: 10px;">
                        <h7 style="margin-top:5px;">Recommended image size is 200x200</h7>
                    </div>
                  

                    <div class="name">
                        <label style="width: 100%;" for="exampleFormControlTextarea1" class="form-label">Status</label>
                        <select style="width: 100%; padding: 10px 10px;" name="status" class="form-select"
                            aria-label="Default select example">
                            <option selected>Draft</option>
                            <option>Publish</option>
                        </select>

                        <button class="btn-new" type="submit" style="width: 100%; border-radius: 5px; ">Create
                            product</button>
                        </form>
                    </div>

    </div>
    </div>

    </div>

    </div>

    </div>
    </div>

      <script>
                        $(document).ready(function () {
                            $(".btnDelete").on('click', function () {
                                $(this).closest("tr").remove();
                            })



                            $('.subCategoriesSelect').on('click', function (e) {
                                
                                e.preventDefault();
                                console.log($(this).val())
                                $.ajax({
                                    method: 'GET',
                                    url: '/fetch-producttypes',
                                    dataType: 'json',
                                    data: {
                                        filtersubcategoryId: $(this).val()
                                    },
                                    success: (res) => {
                                        console.log({ "Success Response": res })
                                        if (res.status == true) {
                                            let filterList = [];
                                            res.result.map((element) => {
                                                filterList = `<option> ${element.name} </option>`
                                            })
                                            $('.filterSelect').html(filterList)
                                        } else {
                                            $('.filterSelect').html(`<option> ${res.result} </option>`)
                                        }
                                    },
                                    error: (err) => {
                                        console.log({ "Error Response": err })
                                    }
                                })
                            })



                         

                            $('.categoriesSelect').on('change', function (e) {
                                $('#subCategory option').remove()
                                e.preventDefault();
                                console.log($(this).val())
                                $.ajax({
                                    method: 'GET',
                                    url: '/products/fetch-subcategories',
                                    dataType: 'json',
                                    data: {
                                        categoryId: $(this).val()
                                    },
                                    success: (res) => {
                                        console.log("hello")
                                        console.log(res);
                                        //data = JSON.parse(res);
                                        $.each(res, function (key, value) {
                                            console.log(value.categorytype)
                                            $('#subCategory')
                                                .append($("<option></option>")
                                                    .attr("value", value.name)
                                                    .text(value.name));
                                        });

                                    },
                                    error: (err) => {
                                        console.log({ "Error Response": err })
                                    }
                                })
                            })
                        })
                    </script> 


<!-- <script
                type="text/javascript"
                charset="utf8"
                src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"
                ></script>
                <script
                type="text/javascript"
                charset="utf8"
                src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
                <script>
                $(function() {
                $("#example").dataTable();
                });
                </script> -->




    <%- include('../partials/footer'); %>